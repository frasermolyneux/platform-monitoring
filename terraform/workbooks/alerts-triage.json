{
    "version": "Notebook/1.0",
    "items": [
        {
            "type": 9,
            "content": {
                "version": "KqlParameterItem/1.0",
                "parameters": [
                    {
                        "id": "c9aaf7da-fffe-48c6-b8c5-78fdb28ee08b",
                        "version": "KqlParameterItem/1.0",
                        "name": "Subscription",
                        "type": 6,
                        "isRequired": true,
                        "multiSelect": true,
                        "quote": "'",
                        "delimiter": ",",
                        "typeSettings": {
                            "additionalResourceOptions": [
                                "value::all"
                            ],
                            "includeAll": false,
                            "showDefault": false
                        },
                        "timeContext": {
                            "durationMs": 86400000
                        },
                        "defaultValue": "value::all"
                    },
                    {
                        "id": "d5eaaefc-0fdf-4446-9cd1-1df085bce673",
                        "isRequired": true,
                        "name": "TimeRange",
                        "timeContext": {
                            "durationMs": 86400000
                        },
                        "type": 4,
                        "typeSettings": {
                            "allowCustom": true,
                            "selectableValues": [
                                {
                                    "durationMs": 300000
                                },
                                {
                                    "durationMs": 900000
                                },
                                {
                                    "durationMs": 1800000
                                },
                                {
                                    "durationMs": 3600000
                                },
                                {
                                    "durationMs": 14400000
                                },
                                {
                                    "durationMs": 43200000
                                },
                                {
                                    "durationMs": 86400000
                                },
                                {
                                    "durationMs": 172800000
                                },
                                {
                                    "durationMs": 259200000
                                },
                                {
                                    "durationMs": 604800000
                                },
                                {
                                    "durationMs": 1209600000
                                },
                                {
                                    "durationMs": 2419200000
                                },
                                {
                                    "durationMs": 2592000000
                                },
                                {
                                    "durationMs": 5184000000
                                },
                                {
                                    "durationMs": 7776000000
                                }
                            ]
                        },
                        "value": {
                            "durationMs": 259200000
                        },
                        "version": "KqlParameterItem/1.0"
                    }
                ],
                "style": "pills",
                "queryType": 0,
                "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "name": "global-parameters"
        },
        {
            "type": 12,
            "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                    {
                        "type": 1,
                        "content": {
                            "json": "# Unresolved Alerts\r\nAlerts within timerange where MonitorCondition=Fired and AlertState=New|Acknowledged",
                            "style": "error"
                        },
                        "name": "unresolvedAlertsTitle"
                    },
                    {
                        "type": 3,
                        "content": {
                            "version": "KqlItem/1.0",
                            "query": "AlertsManagementResources | where type =~ 'microsoft.alertsmanagement/alerts'\r\n| where todatetime(properties.essentials.startDateTime) {TimeRange}  \r\n| extend AlertState=tostring(properties.essentials.alertState)\r\n| extend MonitorCondition=tostring(properties.essentials.monitorCondition)\r\n| extend Severity=tostring(properties.essentials.severity)\r\n| extend Severity=case(isempty(Severity), \"Sev4\", Severity == 0, \"Sev0\", Severity == 1, \"Sev1\", Severity == 2, \"Sev2\", Severity == 3, \"Sev3\", Severity == 4, \"Sev4\", Severity)\r\n| where MonitorCondition == \"Fired\"\r\n| where AlertState in (\"New\", \"Acknowledged\")\r\n| summarize Count=count() by Severity\r\n| order by Severity asc",
                            "size": 4,
                            "exportedParameters": [
                                {
                                    "fieldName": "Severity",
                                    "parameterName": "UnresolvedAlertsSeverity"
                                },
                                {
                                    "parameterType": 1
                                }
                            ],
                            "queryType": 1,
                            "resourceType": "microsoft.resourcegraph/resources",
                            "crossComponentResources": [
                                "{Subscription}"
                            ],
                            "visualization": "tiles",
                            "tileSettings": {
                                "leftContent": {
                                    "columnMatch": "Count",
                                    "formatOptions": {
                                        "thresholdsGrid": [
                                            {
                                                "operator": "==",
                                                "representation": "4",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev0"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "3",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev1"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "2",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev2"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "1",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev3"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "1",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev4"
                                            },
                                            {
                                                "operator": "Default",
                                                "representation": "success",
                                                "text": "{0}{1}",
                                                "thresholdValue": null
                                            }
                                        ],
                                        "thresholdsOptions": "icons"
                                    },
                                    "formatter": 18,
                                    "numberFormat": {
                                        "options": {
                                            "maximumFractionDigits": 2,
                                            "maximumSignificantDigits": 3,
                                            "style": "decimal"
                                        },
                                        "unit": 17
                                    }
                                },
                                "showBorder": true,
                                "titleContent": {
                                    "columnMatch": "Severity",
                                    "formatOptions": {
                                        "thresholdsGrid": [
                                            {
                                                "operator": "==",
                                                "representation": "Sev0",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev0"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev1",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev1"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev2",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev2"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev3",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev3"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev4",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev4"
                                            },
                                            {
                                                "operator": "Default",
                                                "representation": "success",
                                                "text": "{0}{1}",
                                                "thresholdValue": null
                                            }
                                        ],
                                        "thresholdsOptions": "icons"
                                    },
                                    "formatter": 18
                                }
                            }
                        },
                        "name": "unresolvedAlerts"
                    },
                    {
                        "type": 3,
                        "content": {
                            "version": "KqlItem/1.0",
                            "query": "AlertsManagementResources | where type =~ 'microsoft.alertsmanagement/alerts'\r\n| where todatetime(properties.essentials.startDateTime) {TimeRange}  \r\n| extend FireTime = todatetime(properties.essentials.startDateTime), \r\n    ResolvedTime = todatetime(properties.essentials.monitorConditionResolvedDateTime),\r\n    Severity=tostring(properties.essentials.severity),\r\n    AlertState=tostring(properties.essentials.alertState),\r\n    MonitorCondition=tostring(properties.essentials.monitorCondition),\r\n    TargetResource = tostring(properties.essentials.targetResource),\r\n    SignalType = tostring(properties.essentials.signalType),\r\n    Description=tostring(properties.essentials.description)\r\n| extend Severity=case(isempty(Severity), \"Sev4\", Severity == 0, \"Sev0\", Severity == 1, \"Sev1\", Severity == 2, \"Sev2\", Severity == 3, \"Sev3\", Severity == 4, \"Sev4\", Severity)\r\n| extend OpenTime = iff(MonitorCondition == \"Resolved\", datetime_diff('minute', ResolvedTime, FireTime), datetime_diff('minute', now(), FireTime))\r\n| where Severity == \"{UnresolvedAlertsSeverity}\"\r\n| where MonitorCondition == \"Fired\"\r\n| where AlertState in (\"New\", \"Acknowledged\")\r\n| project AlertId=id, FireTime, Severity, AlertState, MonitorCondition, OpenTime, Name=name, TargetResource, SignalType, Description\r\n| order by FireTime desc\r\n",
                            "size": 1,
                            "title": "{UnresolvedAlertsSeverity} Alerts",
                            "queryType": 1,
                            "resourceType": "microsoft.resourcegraph/resources",
                            "crossComponentResources": [
                                "{Subscription}"
                            ],
                            "gridSettings": {
                                "formatters": [
                                    {
                                        "columnMatch": "AlertId",
                                        "formatter": 5
                                    },
                                    {
                                        "columnMatch": "FireTime",
                                        "formatter": 6
                                    },
                                    {
                                        "columnMatch": "Severity",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "4",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev0"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "3",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev1"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "2",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev2"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "1",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev3"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "info",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev4"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "AlertState",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "2",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "New"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "1",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Acknowledged"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "MonitorCondition",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Resolved"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "warning",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "OpenTime",
                                        "formatter": 8,
                                        "formatOptions": {
                                            "max": 15,
                                            "palette": "coldHot"
                                        },
                                        "numberFormat": {
                                            "unit": 25,
                                            "options": {
                                                "style": "decimal"
                                            }
                                        }
                                    },
                                    {
                                        "columnMatch": "Name",
                                        "formatter": 1,
                                        "formatOptions": {
                                            "linkTarget": "OpenBlade",
                                            "linkIsContextBlade": true,
                                            "bladeOpenContext": {
                                                "bladeName": "AlertDetailsTemplateBlade",
                                                "bladeParameters": [
                                                    {
                                                        "name": "alertId",
                                                        "source": "column",
                                                        "value": "AlertId"
                                                    },
                                                    {
                                                        "name": "alertName",
                                                        "source": "column",
                                                        "value": "Name"
                                                    },
                                                    {
                                                        "name": "invokedFrom",
                                                        "source": "static",
                                                        "value": "Workbooks"
                                                    }
                                                ],
                                                "extensionName": "Microsoft_Azure_Monitoring"
                                            }
                                        },
                                        "tooltipFormat": {
                                            "tooltip": "View alert details"
                                        }
                                    },
                                    {
                                        "columnMatch": "StartTime",
                                        "formatter": 6
                                    }
                                ]
                            }
                        },
                        "conditionalVisibility": {
                            "comparison": "isNotEqualTo",
                            "parameterName": "UnresolvedAlertsSeverity"
                        },
                        "name": "unresolvedAlertsBySeverity"
                    }
                ]
            },
            "name": "unresolvedAlerts",
            "styleSettings": {
                "padding": "20px",
                "showBorder": true
            }
        },
        {
            "type": 12,
            "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                    {
                        "type": 1,
                        "content": {
                            "json": "# New (Unacknowledged) Alerts\r\nAlerts within timerange where AlertState=New",
                            "style": "error"
                        },
                        "name": "newAlertsTitle"
                    },
                    {
                        "type": 3,
                        "content": {
                            "version": "KqlItem/1.0",
                            "query": "AlertsManagementResources | where type =~ 'microsoft.alertsmanagement/alerts'\r\n| where todatetime(properties.essentials.startDateTime) {TimeRange}  \r\n| extend AlertState=tostring(properties.essentials.alertState)\r\n| extend Severity=tostring(properties.essentials.severity)\r\n| extend Severity=case(isempty(Severity), \"Sev4\", Severity == 0, \"Sev0\", Severity == 1, \"Sev1\", Severity == 2, \"Sev2\", Severity == 3, \"Sev3\", Severity == 4, \"Sev4\", Severity)\r\n| where AlertState == \"New\"\r\n| summarize Count=count() by Severity\r\n| order by Severity asc",
                            "size": 4,
                            "exportedParameters": [
                                {
                                    "fieldName": "Severity",
                                    "parameterName": "NewAlertsSeverity"
                                },
                                {
                                    "parameterType": 1
                                }
                            ],
                            "queryType": 1,
                            "resourceType": "microsoft.resourcegraph/resources",
                            "crossComponentResources": [
                                "{Subscription}"
                            ],
                            "visualization": "tiles",
                            "tileSettings": {
                                "leftContent": {
                                    "columnMatch": "Count",
                                    "formatOptions": {
                                        "thresholdsGrid": [
                                            {
                                                "operator": "==",
                                                "representation": "4",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev0"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "3",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev1"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "2",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev2"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "1",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev3"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "1",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev4"
                                            },
                                            {
                                                "operator": "Default",
                                                "representation": "success",
                                                "text": "{0}{1}",
                                                "thresholdValue": null
                                            }
                                        ],
                                        "thresholdsOptions": "icons"
                                    },
                                    "formatter": 18,
                                    "numberFormat": {
                                        "options": {
                                            "maximumFractionDigits": 2,
                                            "maximumSignificantDigits": 3,
                                            "style": "decimal"
                                        },
                                        "unit": 17
                                    }
                                },
                                "showBorder": true,
                                "titleContent": {
                                    "columnMatch": "Severity",
                                    "formatOptions": {
                                        "thresholdsGrid": [
                                            {
                                                "operator": "==",
                                                "representation": "Sev0",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev0"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev1",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev1"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev2",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev2"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev3",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev3"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev4",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev4"
                                            },
                                            {
                                                "operator": "Default",
                                                "representation": "success",
                                                "text": "{0}{1}",
                                                "thresholdValue": null
                                            }
                                        ],
                                        "thresholdsOptions": "icons"
                                    },
                                    "formatter": 18
                                }
                            }
                        },
                        "name": "newAlerts"
                    },
                    {
                        "type": 3,
                        "content": {
                            "version": "KqlItem/1.0",
                            "query": "AlertsManagementResources | where type =~ 'microsoft.alertsmanagement/alerts'\r\n| where todatetime(properties.essentials.startDateTime) {TimeRange}  \r\n| extend FireTime = todatetime(properties.essentials.startDateTime), \r\n    ResolvedTime = todatetime(properties.essentials.monitorConditionResolvedDateTime),\r\n    Severity=tostring(properties.essentials.severity),\r\n    AlertState=tostring(properties.essentials.alertState),\r\n    MonitorCondition=tostring(properties.essentials.monitorCondition),\r\n    TargetResource = tostring(properties.essentials.targetResource),\r\n    SignalType = tostring(properties.essentials.signalType),\r\n    Description=tostring(properties.essentials.description)\r\n| extend Severity=case(isempty(Severity), \"Sev4\", Severity == 0, \"Sev0\", Severity == 1, \"Sev1\", Severity == 2, \"Sev2\", Severity == 3, \"Sev3\", Severity == 4, \"Sev4\", Severity)\r\n| extend OpenTime = iff(MonitorCondition == \"Resolved\", datetime_diff('minute', ResolvedTime, FireTime), datetime_diff('minute', now(), FireTime))\r\n| where Severity == \"{NewAlertsSeverity}\"\r\n| where AlertState == \"New\"\r\n| project AlertId=id, FireTime, Severity, AlertState, MonitorCondition, OpenTime, Name=name, TargetResource, SignalType, Description\r\n| order by FireTime desc\r\n",
                            "size": 1,
                            "title": "{NewAlertsSeverity} Alerts",
                            "queryType": 1,
                            "resourceType": "microsoft.resourcegraph/resources",
                            "crossComponentResources": [
                                "{Subscription}"
                            ],
                            "gridSettings": {
                                "formatters": [
                                    {
                                        "columnMatch": "AlertId",
                                        "formatter": 5
                                    },
                                    {
                                        "columnMatch": "FireTime",
                                        "formatter": 6
                                    },
                                    {
                                        "columnMatch": "Severity",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "4",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev0"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "3",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev1"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "2",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev2"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "1",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev3"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "info",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev4"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "AlertState",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "2",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "New"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "1",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Acknowledged"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "MonitorCondition",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Resolved"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "warning",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "OpenTime",
                                        "formatter": 8,
                                        "formatOptions": {
                                            "max": 15,
                                            "palette": "coldHot"
                                        }
                                    },
                                    {
                                        "columnMatch": "Name",
                                        "formatter": 1,
                                        "formatOptions": {
                                            "linkTarget": "OpenBlade",
                                            "linkIsContextBlade": true,
                                            "bladeOpenContext": {
                                                "bladeName": "AlertDetailsTemplateBlade",
                                                "bladeParameters": [
                                                    {
                                                        "name": "alertId",
                                                        "source": "column",
                                                        "value": "AlertId"
                                                    },
                                                    {
                                                        "name": "alertName",
                                                        "source": "column",
                                                        "value": "Name"
                                                    },
                                                    {
                                                        "name": "invokedFrom",
                                                        "source": "static",
                                                        "value": "Workbooks"
                                                    }
                                                ],
                                                "extensionName": "Microsoft_Azure_Monitoring"
                                            }
                                        },
                                        "tooltipFormat": {
                                            "tooltip": "View alert details"
                                        }
                                    },
                                    {
                                        "columnMatch": "StartTime",
                                        "formatter": 6
                                    }
                                ]
                            }
                        },
                        "conditionalVisibility": {
                            "comparison": "isNotEqualTo",
                            "parameterName": "NewAlertsSeverity"
                        },
                        "name": "alertsBySeverity"
                    }
                ]
            },
            "name": "unacknowledgedAlerts",
            "styleSettings": {
                "padding": "20px",
                "showBorder": true
            }
        },
        {
            "type": 12,
            "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                    {
                        "type": 1,
                        "content": {
                            "json": "# Acknowledged Alerts\r\nAlerts within timerange where AlertState=Acknowledged",
                            "style": "warning"
                        },
                        "name": "acknowledgedAlerts"
                    },
                    {
                        "type": 3,
                        "content": {
                            "version": "KqlItem/1.0",
                            "query": "AlertsManagementResources | where type =~ 'microsoft.alertsmanagement/alerts'\r\n| where todatetime(properties.essentials.startDateTime) {TimeRange}  \r\n| extend AlertState=tostring(properties.essentials.alertState)\r\n| extend Severity=tostring(properties.essentials.severity)\r\n| extend Severity=case(isempty(Severity), \"Sev4\", Severity == 0, \"Sev0\", Severity == 1, \"Sev1\", Severity == 2, \"Sev2\", Severity == 3, \"Sev3\", Severity == 4, \"Sev4\", Severity)\r\n| where AlertState == \"Acknowledged\"\r\n| summarize Count=count() by Severity\r\n| order by Severity asc",
                            "size": 4,
                            "exportedParameters": [
                                {
                                    "fieldName": "Severity",
                                    "parameterName": "AckAlertsSeverity"
                                },
                                {
                                    "parameterType": 1
                                }
                            ],
                            "queryType": 1,
                            "resourceType": "microsoft.resourcegraph/resources",
                            "crossComponentResources": [
                                "{Subscription}"
                            ],
                            "visualization": "tiles",
                            "tileSettings": {
                                "leftContent": {
                                    "columnMatch": "Count",
                                    "formatOptions": {
                                        "thresholdsGrid": [
                                            {
                                                "operator": "==",
                                                "representation": "4",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev0"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "3",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev1"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "2",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev2"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "1",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev3"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "1",
                                                "sourceColumn": "Severity",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev4"
                                            },
                                            {
                                                "operator": "Default",
                                                "representation": "success",
                                                "text": "{0}{1}",
                                                "thresholdValue": null
                                            }
                                        ],
                                        "thresholdsOptions": "icons"
                                    },
                                    "formatter": 18,
                                    "numberFormat": {
                                        "options": {
                                            "maximumFractionDigits": 2,
                                            "maximumSignificantDigits": 3,
                                            "style": "decimal"
                                        },
                                        "unit": 17
                                    }
                                },
                                "showBorder": true,
                                "titleContent": {
                                    "columnMatch": "Severity",
                                    "formatOptions": {
                                        "thresholdsGrid": [
                                            {
                                                "operator": "==",
                                                "representation": "Sev0",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev0"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev1",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev1"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev2",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev2"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev3",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev3"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev4",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev4"
                                            },
                                            {
                                                "operator": "Default",
                                                "representation": "success",
                                                "text": "{0}{1}",
                                                "thresholdValue": null
                                            }
                                        ],
                                        "thresholdsOptions": "icons"
                                    },
                                    "formatter": 18
                                }
                            }
                        },
                        "name": "acknowledgedAlerts"
                    },
                    {
                        "type": 3,
                        "content": {
                            "version": "KqlItem/1.0",
                            "query": "AlertsManagementResources | where type =~ 'microsoft.alertsmanagement/alerts'\r\n| where todatetime(properties.essentials.startDateTime) {TimeRange}  \r\n| extend FireTime = todatetime(properties.essentials.startDateTime), \r\n    ResolvedTime = todatetime(properties.essentials.monitorConditionResolvedDateTime),\r\n    Severity=tostring(properties.essentials.severity),\r\n    AlertState=tostring(properties.essentials.alertState),\r\n    MonitorCondition=tostring(properties.essentials.monitorCondition),\r\n    TargetResource = tostring(properties.essentials.targetResource),\r\n    SignalType = tostring(properties.essentials.signalType),\r\n    Description=tostring(properties.essentials.description)\r\n| extend Severity=case(isempty(Severity), \"Sev4\", Severity == 0, \"Sev0\", Severity == 1, \"Sev1\", Severity == 2, \"Sev2\", Severity == 3, \"Sev3\", Severity == 4, \"Sev4\", Severity)\r\n| extend OpenTime = iff(MonitorCondition == \"Resolved\", datetime_diff('minute', ResolvedTime, FireTime), datetime_diff('minute', now(), FireTime))\r\n| where Severity == \"{AckAlertsSeverity}\"\r\n| where AlertState == \"Acknowledged\"\r\n| project AlertId=id, FireTime, Severity, AlertState, MonitorCondition, OpenTime, Name=name, TargetResource, SignalType, Description\r\n| order by FireTime desc",
                            "size": 1,
                            "title": "{AckAlertsSeverity} Alerts",
                            "queryType": 1,
                            "resourceType": "microsoft.resourcegraph/resources",
                            "crossComponentResources": [
                                "{Subscription}"
                            ],
                            "gridSettings": {
                                "formatters": [
                                    {
                                        "columnMatch": "AlertId",
                                        "formatter": 5
                                    },
                                    {
                                        "columnMatch": "FireTime",
                                        "formatter": 6
                                    },
                                    {
                                        "columnMatch": "Severity",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "4",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev0"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "3",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev1"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "2",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev2"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "1",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev3"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "info",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev4"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "AlertState",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "2",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "New"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "1",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Acknowledged"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "MonitorCondition",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Resolved"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "warning",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "OpenTime",
                                        "formatter": 8,
                                        "formatOptions": {
                                            "max": 15,
                                            "palette": "coldHot"
                                        },
                                        "numberFormat": {
                                            "unit": 25,
                                            "options": {
                                                "style": "decimal"
                                            }
                                        }
                                    },
                                    {
                                        "columnMatch": "Name",
                                        "formatter": 1,
                                        "formatOptions": {
                                            "linkTarget": "OpenBlade",
                                            "linkIsContextBlade": true,
                                            "bladeOpenContext": {
                                                "bladeName": "AlertDetailsTemplateBlade",
                                                "bladeParameters": [
                                                    {
                                                        "name": "alertId",
                                                        "source": "column",
                                                        "value": "AlertId"
                                                    },
                                                    {
                                                        "name": "alertName",
                                                        "source": "column",
                                                        "value": "Name"
                                                    },
                                                    {
                                                        "name": "invokedFrom",
                                                        "source": "static",
                                                        "value": "Workbooks"
                                                    }
                                                ],
                                                "extensionName": "Microsoft_Azure_Monitoring"
                                            }
                                        },
                                        "tooltipFormat": {
                                            "tooltip": "View alert details"
                                        }
                                    },
                                    {
                                        "columnMatch": "StartTime",
                                        "formatter": 6
                                    }
                                ]
                            }
                        },
                        "conditionalVisibility": {
                            "comparison": "isNotEqualTo",
                            "parameterName": "AckAlertsSeverity"
                        },
                        "name": "acknowledgedAlertsBySeverity"
                    }
                ]
            },
            "name": "acknowledgedAlerts",
            "styleSettings": {
                "padding": "20px",
                "showBorder": true
            }
        },
        {
            "type": 12,
            "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                    {
                        "type": 1,
                        "content": {
                            "json": "# Closed Alerts\r\nAlerts within timerange where AlertState=Closed",
                            "style": "info"
                        },
                        "name": "closedAlertsTitle"
                    },
                    {
                        "type": 3,
                        "content": {
                            "version": "KqlItem/1.0",
                            "query": "AlertsManagementResources | where type =~ 'microsoft.alertsmanagement/alerts'\r\n| where todatetime(properties.essentials.startDateTime) {TimeRange}  \r\n| extend AlertState=tostring(properties.essentials.alertState)\r\n| extend Severity=tostring(properties.essentials.severity)\r\n| extend Severity=case(isempty(Severity), \"Sev4\", Severity == 0, \"Sev0\", Severity == 1, \"Sev1\", Severity == 2, \"Sev2\", Severity == 3, \"Sev3\", Severity == 4, \"Sev4\", Severity)\r\n| where AlertState == \"Closed\"\r\n| summarize Count=count() by Severity\r\n| order by Severity asc",
                            "size": 4,
                            "exportedParameters": [
                                {
                                    "fieldName": "Severity",
                                    "parameterName": "ClosedAlertsSeverity"
                                },
                                {
                                    "parameterType": 1
                                }
                            ],
                            "queryType": 1,
                            "resourceType": "microsoft.resourcegraph/resources",
                            "crossComponentResources": [
                                "{Subscription}"
                            ],
                            "visualization": "tiles",
                            "tileSettings": {
                                "leftContent": {
                                    "columnMatch": "Count",
                                    "formatOptions": {
                                        "palette": "red"
                                    },
                                    "formatter": 12,
                                    "numberFormat": {
                                        "options": {
                                            "maximumFractionDigits": 2,
                                            "maximumSignificantDigits": 3,
                                            "style": "decimal"
                                        },
                                        "unit": 17
                                    }
                                },
                                "showBorder": true,
                                "titleContent": {
                                    "columnMatch": "Severity",
                                    "formatOptions": {
                                        "thresholdsGrid": [
                                            {
                                                "operator": "==",
                                                "representation": "Sev0",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev0"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev1",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev1"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev2",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev2"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev3",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev3"
                                            },
                                            {
                                                "operator": "==",
                                                "representation": "Sev4",
                                                "text": "{0}{1}",
                                                "thresholdValue": "Sev4"
                                            },
                                            {
                                                "operator": "Default",
                                                "representation": "success",
                                                "text": "{0}{1}",
                                                "thresholdValue": null
                                            }
                                        ],
                                        "thresholdsOptions": "icons"
                                    },
                                    "formatter": 18
                                }
                            }
                        },
                        "name": "closedAlerts"
                    },
                    {
                        "type": 3,
                        "content": {
                            "version": "KqlItem/1.0",
                            "query": "AlertsManagementResources | where type =~ 'microsoft.alertsmanagement/alerts'\r\n| where todatetime(properties.essentials.startDateTime) {TimeRange}  \r\n| extend FireTime = todatetime(properties.essentials.startDateTime), \r\n    ResolvedTime = todatetime(properties.essentials.monitorConditionResolvedDateTime),\r\n    Severity=tostring(properties.essentials.severity),\r\n    AlertState=tostring(properties.essentials.alertState),\r\n    MonitorCondition=tostring(properties.essentials.monitorCondition),\r\n    TargetResource = tostring(properties.essentials.targetResource),\r\n    SignalType = tostring(properties.essentials.signalType),\r\n    Description=tostring(properties.essentials.description)\r\n| extend Severity=case(isempty(Severity), \"Sev4\", Severity == 0, \"Sev0\", Severity == 1, \"Sev1\", Severity == 2, \"Sev2\", Severity == 3, \"Sev3\", Severity == 4, \"Sev4\", Severity)\r\n| extend OpenTime = iff(MonitorCondition == \"Resolved\", datetime_diff('minute', ResolvedTime, FireTime), datetime_diff('minute', now(), FireTime))\r\n| where Severity == \"{ClosedAlertsSeverity}\"\r\n| where AlertState == \"Closed\"\r\n| project AlertId=id, FireTime, Severity, AlertState, MonitorCondition, OpenTime, Name=name, TargetResource, SignalType, Description\r\n| order by FireTime desc",
                            "size": 1,
                            "title": "{ClosedAlertsSeverity} Alerts",
                            "queryType": 1,
                            "resourceType": "microsoft.resourcegraph/resources",
                            "crossComponentResources": [
                                "{Subscription}"
                            ],
                            "gridSettings": {
                                "formatters": [
                                    {
                                        "columnMatch": "AlertId",
                                        "formatter": 5
                                    },
                                    {
                                        "columnMatch": "FireTime",
                                        "formatter": 6
                                    },
                                    {
                                        "columnMatch": "Severity",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "4",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev0"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "3",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev1"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "2",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev2"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "1",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev3"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "info",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Sev4"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "AlertState",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "2",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "New"
                                                },
                                                {
                                                    "operator": "==",
                                                    "representation": "1",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Acknowledged"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "MonitorCondition",
                                        "formatter": 18,
                                        "formatOptions": {
                                            "thresholdsOptions": "icons",
                                            "thresholdsGrid": [
                                                {
                                                    "operator": "==",
                                                    "representation": "success",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": "Resolved"
                                                },
                                                {
                                                    "operator": "Default",
                                                    "representation": "warning",
                                                    "text": "{0}{1}",
                                                    "thresholdValue": null
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "columnMatch": "OpenTime",
                                        "formatter": 8,
                                        "formatOptions": {
                                            "max": 15,
                                            "palette": "coldHot"
                                        },
                                        "numberFormat": {
                                            "unit": 25,
                                            "options": {
                                                "style": "decimal"
                                            }
                                        }
                                    },
                                    {
                                        "columnMatch": "Name",
                                        "formatter": 1,
                                        "formatOptions": {
                                            "linkTarget": "OpenBlade",
                                            "linkIsContextBlade": true,
                                            "bladeOpenContext": {
                                                "bladeName": "AlertDetailsTemplateBlade",
                                                "bladeParameters": [
                                                    {
                                                        "name": "alertId",
                                                        "source": "column",
                                                        "value": "AlertId"
                                                    },
                                                    {
                                                        "name": "alertName",
                                                        "source": "column",
                                                        "value": "Name"
                                                    },
                                                    {
                                                        "name": "invokedFrom",
                                                        "source": "static",
                                                        "value": "Workbooks"
                                                    }
                                                ],
                                                "extensionName": "Microsoft_Azure_Monitoring"
                                            }
                                        },
                                        "tooltipFormat": {
                                            "tooltip": "View alert details"
                                        }
                                    },
                                    {
                                        "columnMatch": "StartTime",
                                        "formatter": 6
                                    }
                                ]
                            }
                        },
                        "conditionalVisibility": {
                            "comparison": "isNotEqualTo",
                            "parameterName": "ClosedAlertsSeverity"
                        },
                        "name": "closedAlertsBySeverity"
                    }
                ]
            },
            "name": "closedAlerts",
            "styleSettings": {
                "padding": "20px",
                "showBorder": true
            }
        }
    ],
    "fallbackResourceIds": [
        "azure monitor"
    ],
    "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}